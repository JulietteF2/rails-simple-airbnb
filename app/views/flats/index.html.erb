<div class="container">
  <h1>All our Flats (<%= @flats.length %>)</h1>

  <div class="flat-grid">
    <% @flats.each do |f| %>

      <div class="flat-card">
        <div class="flat-card-img">
          <img src="https://source.unsplash.com/random/255x150" alt="flat">
        </div>
        <div class="flat-card-content">
          <h3><%= f.name %></h3>
          <%= f.address %>
          <p><i class="fas fa-users"></i> <%= f.number_of_guests %> <i class="fas fa-dollar-sign"></i> <%= f.price_per_night %></p>
        </div>

        <div class="info">
          <%= link_to "More info", flat_path(f) %>
          <%= link_to "Edit", edit_flat_path(f), class: "yellow" %>
          <%= link_to "Delete", flat_path(f), method: :delete, id: "delete-link"%>
        </div>

      </div>

    <% end %>
  </div>

</div>

<script>
  trashs = document.querySelectorAll('#delete-link');

  trashs.forEach( (trash) => {
    trash.addEventListener("click", (event) => {
    event.preventDefault();
    const link = trash["href"];
    if (window.confirm("Are you sure you want to delete this flat?")) {
      window.location = link;
    }
  });
});
</script>
